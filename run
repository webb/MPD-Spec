#!/bin/bash

this_dir=$(dirname "$0")
build_dir=$this_dir/build
mkdir -p "$build_dir"

"${this_dir}"/inventory/get-inventory --output="$build_dir"/inventory.xml --target="$this_dir"/meta
xmllint --noout "$build_dir"/inventory.xml

# validate meta

xmllint --noout meta/manifest.xml
xmllint --noout meta/manifest/xml-catalog.xml
xmllint --noout meta/manifest/manifest.xsd
xs-validate -c meta/manifest/xml-catalog.xml meta/manifest.xml
